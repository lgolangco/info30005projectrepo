# API documentation

## INFO30005 (Cosmos)
http://info30005-studyspot.herokuapp.com/
- Name: StudySpot
- Members: Lucy, Michael, Lauren, Su Lyn


For this deliverable, we've identified three key components:
1. User
2. Venue
3. Review

The functionalities associated with each component are outlined below.


## User  
The user schema is as follows:  
* \_id *(autogenerated ObjectId, e.g. 5ead49c814167d410fff9cec)*  
* name *(mandatory string, e.g. Derek Shephard)*
* email *(mandatory string, e.g. derekshephard@gmail.com)*
* password *(mandatory string, e.g. admin)*
* cover *(string, url of cover photo, has default)*
* avatar *(string, url of profile photo, has default)*

The user component has the following functionalities:
1. **View all users**  
Access by clicking on 'USERS' in the navigation bar.  
This is used for viewing all existing users.  
If there are no existing user objects it notifies the client.   

GET /user/

2. **View individual users**  
Access individual user by clicking on user's names in 'USERS'.  
If it does not exist in the database, it notifies the client.  

GET /user/:id/  
e.g. /user/5ebb0974742b597eae2ead61  

3. **getUserByEmail**  
Access individual user via email address by entering path /user/email/{user's email}.    
If there are no users with that email address, it notifies the client.  

GET /user/email/:email  
e.g. /user/email/derekshephard@gmail.com  


4. **View User Profile**    
Once, logged in, the user will be redirected to their user profile, or access it by clicking on "MY Profile".  
It contains the user's information, other functionalities on the profile page are yet to be implemented.       

GET  /profile/  
e.g. /profile/  

5. **Update User**  
Once, logged in, the user can edit their information by clicking "MY PROFILE"->"Edit".  
This will redirect the user to a form that allows the to edit their name, email, password, cover photo and profile photo.  
The user can confirm edits by clicking "Update" or cancel edits by clicking "Cancel", which redirects back to the profile page.    

GET  /profile/edit  
POST /profile/  

6. **Delete User Account**    
Once logged in, the user can delete the account by clicking "MY PROFILE"->"Delete".  
This will delete the user's account from the database and redirect user back to home page.  

GET  /profile/delete/  
POST  /profile/delete/  

7. **Register user**    
To register the user account, the user enters in their full name, email and chosen password. 
Their password will be hashed using the bcrypt package.

GET  /register/  
POST  /register/ 

8. **Log In**    
For the user to log into their account, they will need to provide their email and password. 
The email will act as the unique user identifier. Once user logs into their account, the SIGN UP button disappears. 

GET  /login/  
POST  /login/ 

9. **Log Out**    
User can log out of their account using the LOG OUT button in the profile page.

GET  /logout/  

10. **Home Page**    
User can navigate towards the home page by clicking on the StudySpot logo. 

GET  /

## Venue
The venue schema is as follows:
* \_id *(autogenerated ObjectId, e.g. 5eae288471ca2e93550a7c5f)*
* venueName *(mandatory string, e.g. Le Miel Et La Lune)*
* venueType *(mandatory string, e.g. Cafe)*
* venueStreetAddress *(mandatory string, e.g. 330 Cardigan St)*
* venueSuburb *(mandatory string, e.g. Carlton)*
* venueState *(mandatory string, e.g. VIC)*
* venuePostcode *(mandatory string, e.g. 3053)*

The venue component has the following functionalities:
1. **getAllVenues: GET /venue/**  
This is used for viewing all existing venues.  
This returns an array of all existing venue objects. If there are no existing venue objects it notifies the client.  

e.g. /venue/  

2. **getVenueByID: GET /venue/byid/:\_id/**  
This returns the venue object with the given \_id, if it exists in the database.  
If it does not exist in the database, it notifies the client.  
It takes the following inputs: from route parameter a venue's \_id.

e.g. /venue/byid/5eae288471ca2e93550a7c5f  

3. **getVenueByPostcode: GET /venue/bypostcode/:venuePostcode**  
This returns an array of all the venue objects with the given postcode, if such venues exist in the database.  
If there are no venues in that postcode, it notifies the client.
It takes the following inputs: from route parameter a venuePostcode.  

e.g. /venue/bypostcode/3053  

4. **getVenueByType: GET /venue/bytype/:venueType**  
This returns an array of all the venue objects with the given type, if such venues  exist in the database.  
If there are no venues with that type, it notifies the client.  
It takes the following inputs: from route parameter a venueType.  

e.g. /venue/bytype/Cafe  

5. **addVenue: POST /venue/**  
This adds a venue object with values set as per the request.  
It takes the following inputs: from body a venueName, venueType, venueStreetAddress, venueSuburb, venueState, and venuePostcode.  

e.g. /venue/  

6. **updateVenue: PATCH /venue/byid/:\_id**  
This updates the venue object with the given \_id as per the request, if it exists in the database.  
If it does not exist in the database, it notifies the client.    
It takes the following inputs: from route parameter a venue's \_id, and from body it
can take any of venueName, venueType, venueStreetAddress, venueSuburb, venueState,
or venuePostcode.  

e.g. /venue/byid/5eae288471ca2e93550a7c5f  

7. **deleteVenue: delete /venue/byid/:\_id**  
This deletes the venue object with the given \_id, if it exists in the database.  
If it does not exist in the database, it notifies the client.  
It takes the following inputs: from route parameter a venue's \_id.    

e.g. /venue/byid/5eae288471ca2e93550a7c5f  

## Review
The review functionality is used for viewing, posting and modifying reviews of venues by users. It assumes each user is only allowed to post one review per venue, and that each review must contain a rating.  

The review schema is as follows:
* \_id *(autogenerated ObjectId, e.g. 5ea95743b78d3762f88873c1)*
* venueId *(mandatory ObjectId from Venue data, e.g. 5ea67d644f821a73b6841702)*
* userId *(mandatory ObjectId from User data, e.g. 5ead4c64008cdc41911d437c)*
* datePosted *(autogenerated Date, e.g. 2020-04-29T10:30:27.204+00:00)*
* content *(non-mandatory String, e.g. This is Matt Murdock's updated review of Kathleen Syme Library and Community Centre)*
* rating *(mandatory Number ranging from 1 to 5, e.g. 2)*

The review component has the following functionalities:
1. **getAllReviews: GET /review/**  
This is used for viewing all existing reviews for venues by users.  
This returns an array of all reviews if there exists any, otherwise returns message "There are no existing reviews yet".  
e.g. /review/5ea95743b78d3762f88873c1  

2. **updateReview: PATCH  /review/:venueId/**  
This is used for updating the rating and/or the comment of a review for a user for a venue.   
It takes the following inputs: from route parameter a venueId, and from body a userId, a rating and/or a comment.   
This returns the review object with the given venue and user id values as per the request, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/5ea67d644f821a73b6841702  

3. **addReview: POST /review/**  
This is used for creating a review with a rating and an optional comment for a user for a venue (each user is only allowed have one review per venue).   
It takes the following inputs: from body an existing venueId, an existing userId, a rating and a optional comment.   
This adds a review object with values set as per the request, otherwise returns message describing reasons why request failed, if a review for the specified venue and user already exists, it returns a message "try updateReview instead".  
e.g. /review/  

4. **getReviewByIDs: GET /review/byids/:venueId/:userId/**   
This is used for viewing all existing reviews for a specified venue left by a specified user.  
It takes the following inputs: from route parameter a venueId and a userId.   
This returns the review object with the given venue and user id values, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/byids/5ea67d644f821a73b6841702/5ead4c64008cdc41911d437c/

5. **getReviewByVenueID: GET /review/byvenue/:venueId/**  
This is used for viewing all existing reviews for a specified venue.  
It takes the following inputs: from route parameter a venueId.   
This returns the review object with the given venue id value, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/byvenue/5ea67d644f821a73b6841702/  

6. **getReviewByUserID: GET /review/byuser/:userId/**  
This is used for viewing all existing reviews left by a specified user.  
It takes the following inputs: from route parameter a userId.   
This returns the review object with the given user id value, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/byuser/5ead4c64008cdc41911d437c/  

7. **deleteReview: DELETE /review/:venueId/**  
This is used for deleting a review for a user about a venue.   
It takes the following inputs: from route parameter a venueId, and from body a userId.   
This deletes the venue object with the given venue and user id values, and returns success message if it exists in the database, otherwise returns message describing reasons why request failed.  
e.g. /review/5ea67d644f821a73b6841702/  
