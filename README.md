# API documentation

## INFO30005 (Cosmos)
http://info30005-studyspot.herokuapp.com/
- Name: StudySpot
- Members: Lucy, Michael, Lauren, Su Lyn


For this deliverable, we've identified three key components:
1. User
2. Venue
3. Review

The functionalities associated with each component are outlined below.


## User
The user schema is as follows:
* \_id *(e.g. 5ead49c814167d410fff9cec)*
* name *(e.g. Derek Shephard)*
* email *(e.g. derekshephard@gmail.com)*
* password *(e.g. admin)*

The user component has the following functionalities:
1. **getAllUsers: GET /user/**  
This returns an array of all user objects.  
e.g. /user/  

2. **getUserByID: GET /user/:id/**  
This returns the user objects with the given \_id, if it exists in the database.  
e.g. /user/5ead49c814167d410fff9cec 

3. **getUserByEmail: GET /user/email/:email/**  
This returns the user objects with the given email, if it exists in the database.  
e.g. /user/email/derekshephard@gmail.com

4. **addUser: PUT /user/**  
This adds a user object with values set as per the request.  
e.g. /user/  

5. **updateUser: PATCH /user/:id/**  
This updates the user object with the given \_id as per the request, if it exists in the database.  
e.g. /user/5ead49c814167d410fff9cec

6. **deleteUserByID: DELETE /user/:id/**  
This deletes the user object with the given \_id, if it exists in the database.
e.g. /user/5ead49c814167d410fff9cec

## Venue
The venue schema is as follows:
* \_id *(e.g. 5ea39c005745fd4b5d77c8fe)*
* venueName *(e.g. Le Miel Et La Lune)*
* venueType *(e.g. Cafe)*
* venueStreetAddress *(e.g. 330 Cardigan St)*
* venueSuburb *(e.g. Carlton)*
* venueState *(e.g. VIC)*
* venuePostcode *(e.g. 3053)*

The venue component has the following functionalities:
1. **getAllVenues: GET /venue/**  
This returns an array of all venue objects.  
e.g. /venue/  

2. **getVenueByID: GET /venue/byid/:\_id/**  
This returns the venue object with the given \_id, if it exists in the database.  
If it does not exist in the database, it notifies the client.  

e.g. /venue/byid/5ea39c005745fd4b5d77c8fe  

3. **getVenueByPostcode: GET /venue/bypostcode/:venuePostcode**  
This returns an array of all the venue objects with the given postcode, if such venues exist in the database.  
If there are no venues in that postcode, it notifies the client.  

e.g. /venue/bypostcode/3053  

4. **getVenueByType: GET /venue/bytype/:venueType**  
This returns an array of all the venue objects with the given type, if such venues  exist in the database.  
If there are no venues with that type, it notifies the client.  

e.g. /venue/bytype/Cafe  

5. **addVenue: PUT /venue/**  
This adds a venue object with values set as per the request.  

e.g. /venue/  

6. **updateVenue: PATCH /venue/byid/:\_id**  
This updates the venue object with the given \_id as per the request, if it exists in the database.  
If it does not exist in the database, it notifies the client.  

e.g. /venue/byid/5ea39c005745fd4b5d77c8fe  

7. **deleteVenue: delete /venue/byid/:\_id**  
This deletes the venue object with the given \_id, if it exists in the database.  
If it does not exist in the database, it notifies the client.  

e.g. /venue/byid/5ea39c005745fd4b5d77c8fe  

## Review
The review functionality is used for viewing, posting and modifying reviews of venues by users. It assumes each user is only allowed to post one review per venue, and that each review must contain a rating.  

The review schema is as follows:
* \_id *(autogenerated ObjectId, e.g. 5ea95743b78d3762f88873c1)*
* venueId *(mandatory ObjectId from Venue data, e.g. 5ea67d644f821a73b6841702)*
* userId *(mandatory ObjectId from User data, e.g. 5ead4c64008cdc41911d437c)*
* datePosted *(autogenerated Date, e.g. 2020-04-29T10:30:27.204+00:00)*
* content *(non-mandatory String, e.g. This is Matt Murdock's updated review of Kathleen Syme Library and Community Centre)*
* rating *(mandatory Number ranging from 1 to 5, e.g. 2)*

The review component has the following functionalities:
1. **getAllReviews: GET /review/**  
This is used for viewing all existing reviews for venues by users.  
This returns an array of all reviews if there exists any, otherwise returns message "There are no existing reviews yet".  
e.g. /review/5ea95743b78d3762f88873c1  

2. **updateReview: PATCH  /review/:venueId/**  
This is used for updating the rating and/or the comment of a review for a user for a venue.   
It takes the following inputs: from route parameter a venueId, and from body a userId, a rating and/or a comment.   
This returns the review object with the given venue and user id values as per the request, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/5ea67d644f821a73b6841702  

3. **addReview: POST /review/**  
This is used for creating a review with a rating and an optional comment for a user for a venue.   
It takes the following inputs: from body an existing venueId, an existing userId, a rating and a optional comment.   
This adds a review object with values set as per the request, otherwise returns message describing reasons why request failed..  
e.g. /review/  

4. **getReviewByIDs: GET /review/byids/:venueId/:userId/**   
This is used for viewing all existing reviews for a specified venue left by a specified user.  
It takes the following inputs: from route parameter a venueId and a userId.   
This returns the review object with the given venue and user id values, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/byids/5ea67d644f821a73b6841702/5ead4c64008cdc41911d437c/

5. **getReviewByVenueID: GET /review/byvenue/:venueId/**  
This is used for viewing all existing reviews for a specified venue.  
It takes the following inputs: from route parameter a venueId.   
This returns the review object with the given venue id value, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/byvenue/5ea67d644f821a73b6841702/  

6. **getReviewByUserID: GET /review/byuser/:userId/**  
This is used for viewing all existing reviews left by a specified user.  
It takes the following inputs: from route parameter a userId.   
This returns the review object with the given user id value, if it exists in the database, otherwise returns message describing reasons why query failed.  
e.g. /review/byuser/5ead4c64008cdc41911d437c/  

7. **deleteReview: DELETE /review/:venueId/**  
This is used for deleting a review for a user about a venue.   
It takes the following inputs: from route parameter a venueId, and from body a userId.   
This deletes the venue object with the given venue and user id values, and returns success message if it exists in the database, otherwise returns message describing reasons why request failed.  
e.g. /review/5ea67d644f821a73b6841702/  

