extends layout
    
block content
  
  .main.container
      .col-md-8.offset-2
        
        if (completed)
          h1 Review successfully updated!
          
          h5 Your Review of #{venue.venueName}
          - reviewDate = review.datePosted.toDateString()
          
          div
            .card.mb-3

              .row.m-3
                .col-3
                  - var userAvatarURL = "https://studyspot.s3.amazonaws.com/user/avatar/" + review.userId.toString() + ".jpg"
                  img.rounded(src = userAvatarURL, style="height: 100px; width: 100px; object-fit: cover", onerror="this.src='https://studyspot.s3.amazonaws.com/user/avatar/default.jpg'")
                .col-9
                  div
                    //insert user name
                    h5 #[a(href="/user/"+review.userId) #{review.userFirstName} #{review.userLastName}]
                  div
                    if (review.rating < 0.25)
                      img.rounded(src="/images/venue/rating/0.png", width="100px")
                    else if (review.rating < 1.25)
                      img.rounded(src="/images/venue/rating/1.png", width="100px")
                    else if (review.rating < 2.25)
                      img.rounded(src="/images/venue/rating/2.png", width="100px")
                    else if (review.rating < 3.25)
                      img.rounded(src="/images/venue/rating/3.png", width="100px")
                    else if (review.rating < 4.25)
                      img.rounded(src="/images/venue/rating/4.png", width="100px")
                    else
                      img.rounded(src="/images/venue/rating/5.png", width="100px")
                  hr

              .offset-1

                p #{review.content}

              div
                p.mr-2.text-muted.float-right(style="font-size: 12px") #{date}
          
          - const backToVenue = "/venue/" + review.venueId.toString()
          a(href=backToVenue) Back to venue page
          
        else
          
          h4.mt-5.mb-4 Update your review
          
          p Edit your review for <strong>#{venue.venueName} </strong>           

          form(method='POST' action='')
              
            input.form-control(type="hidden" name='userId' value=user._id) 
            
            input.form-control(type="hidden" name='userFirstName' value=user.first_name) 
            input.form-control(type="hidden" name='userLastName' value=user.last_name) 
            
            input.form-control(type="hidden" name='venueId' value=venue._id)  
        
          

            
            if review.rating == 1
              .btn-group.btn-group-toggle(data-toggle="buttons")
                label.btn.btn-outline-danger
                  input#option1(type="radio" name="star" value=1 autocomplete="off" checked) 
                  |1 Star ★

                label.btn.btn-outline-warning
                  input#option2(type="radio" name="star" value=2 autocomplete="off") 
                  |2 Stars ★
                
                label.btn.btn-outline-secondary
                  input#option3(type="radio" name="star" value=3 autocomplete="off") 
                  |3 Stars ★
                  
                label.btn.btn-outline-info
                  input#option4(type="radio" name="star" value=4 autocomplete="off") 
                  |4 Stars ★
                  
                label.btn.btn-outline-success
                  input#option5(type="radio" name="star" value=5 autocomplete="off") 
                  |5 Stars ★
            
            
            else if review.rating == 2
              .btn-group.btn-group-toggle(data-toggle="buttons")
                label.btn.btn-outline-danger
                  input#option1(type="radio" name="star" value=1 autocomplete="off") 
                  |1 Star ★

                label.btn.btn-outline-warning
                  input#option2(type="radio" name="star" value=2 autocomplete="off" checked) 
                  |2 Stars ★
                
                label.btn.btn-outline-secondary
                  input#option3(type="radio" name="star" value=3 autocomplete="off") 
                  |3 Stars ★
                  
                label.btn.btn-outline-info
                  input#option4(type="radio" name="star" value=4 autocomplete="off") 
                  |4 Stars ★
                  
                label.btn.btn-outline-success
                  input#option5(type="radio" name="star" value=5 autocomplete="off") 
                  |5 Stars ★
            
            else if review.rating == 3
              .btn-group.btn-group-toggle(data-toggle="buttons")
                label.btn.btn-outline-danger
                  input#option1(type="radio" name="star" value=1 autocomplete="off") 
                  |1 Star ★

                label.btn.btn-outline-warning
                  input#option2(type="radio" name="star" value=2 autocomplete="off") 
                  |2 Stars ★
                
                label.btn.btn-outline-secondary
                  input#option3(type="radio" name="star" value=3 autocomplete="off" checked) 
                  |3 Stars ★
                  
                label.btn.btn-outline-info
                  input#option4(type="radio" name="star" value=4 autocomplete="off") 
                  |4 Stars ★
                  
                label.btn.btn-outline-success
                  input#option5(type="radio" name="star" value=5 autocomplete="off") 
                  |5 Stars ★
                
            else if review.rating == 4
              .btn-group.btn-group-toggle(data-toggle="buttons")
                label.btn.btn-outline-danger
                  input#option1(type="radio" name="star" value=1 autocomplete="off") 
                  |1 Star ★

                label.btn.btn-outline-warning
                  input#option2(type="radio" name="star" value=2 autocomplete="off") 
                  |2 Stars ★
                
                label.btn.btn-outline-secondary
                  input#option3(type="radio" name="star" value=3 autocomplete="off") 
                  |3 Stars ★
                  
                label.btn.btn-outline-info
                  input#option4(type="radio" name="star" value=4 autocomplete="off" checked) 
                  |4 Stars ★
                  
                label.btn.btn-outline-success
                  input#option5(type="radio" name="star" value=5 autocomplete="off") 
                  |5 Stars ★
              
            else
              .btn-group.btn-group-toggle(data-toggle="buttons")
                label.btn.btn-outline-danger
                  input#option1(type="radio" name="star" value=1 autocomplete="off") 
                  |1 Star ★

                label.btn.btn-outline-warning
                  input#option2(type="radio" name="star" value=2 autocomplete="off") 
                  |2 Stars ★
                
                label.btn.btn-outline-secondary
                  input#option3(type="radio" name="star" value=3 autocomplete="off") 
                  |3 Stars ★
                  
                label.btn.btn-outline-info
                  input#option4(type="radio" name="star" value=4 autocomplete="off") 
                  |4 Stars ★
                  
                label.btn.btn-outline-success
                  input#option5(type="radio" name="star" value=5 autocomplete="off" checked) 
                  |5 Stars ★
          
            // Textbox
            br
            br
            textarea.col-lg-11.form-control(rows="3" name="review" placeholder="Please enter review here.") #{review.content}
            // Submit 
            br
            button.btn.btn-primary(type="submit") Submit
          
